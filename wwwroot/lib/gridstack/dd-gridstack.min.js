import{Utils}from"./utils";import{DDManager}from"./dd-manager";import{DDElement}from"./dd-element";class DDGridStack{resizable(e,l,s,d){return this._getDDElements(e,l).forEach(t=>{if("disable"===l||"enable"===l)t.ddResizable&&t.ddResizable[l]();else if("destroy"===l)t.ddResizable&&t.cleanResizable();else if("option"===l)t.setupResizable({[s]:d});else{var a=t.el.gridstackNode.grid;let e=t.el.getAttribute("gs-resize-handles")||a.opts.resizable.handles||"e,s,se";"all"===e&&(e="n,e,s,w,se,sw,ne,nw");var r=!a.opts.alwaysShowResizeHandle;t.setupResizable({...a.opts.resizable,handles:e,autoHide:r,start:l.start,stop:l.stop,resize:l.resize})}}),this}draggable(e,a,r,l){return this._getDDElements(e,a).forEach(e=>{var t;"disable"===a||"enable"===a?e.ddDraggable&&e.ddDraggable[a]():"destroy"===a?e.ddDraggable&&e.cleanDraggable():"option"===a?e.setupDraggable({[r]:l}):(t=e.el.gridstackNode.grid,e.setupDraggable({...t.opts.draggable,start:a.start,stop:a.stop,drag:a.drag}))}),this}dragIn(e,t){return this._getDDElements(e).forEach(e=>e.setupDraggable(t)),this}droppable(e,t,a,r){return"function"!=typeof t.accept||t._accept||(t._accept=t.accept,t.accept=e=>t._accept(e)),this._getDDElements(e,t).forEach(e=>{"disable"===t||"enable"===t?e.ddDroppable&&e.ddDroppable[t]():"destroy"===t?e.ddDroppable&&e.cleanDroppable():"option"===t?e.setupDroppable({[a]:r}):e.setupDroppable(t)}),this}isDroppable(e){return!(!e?.ddElement?.ddDroppable||e.ddElement.ddDroppable.disabled)}isDraggable(e){return!(!e?.ddElement?.ddDraggable||e.ddElement.ddDraggable.disabled)}isResizable(e){return!(!e?.ddElement?.ddResizable||e.ddElement.ddResizable.disabled)}on(e,t,a){return this._getDDElements(e).forEach(e=>e.on(t,e=>{a(e,DDManager.dragElement?DDManager.dragElement.el:e.target,DDManager.dragElement?DDManager.dragElement.helper:null)})),this}off(e,t){return this._getDDElements(e).forEach(e=>e.off(t)),this}_getDDElements(e,t){const a=e.gridstack||"destroy"!==t&&"disable"!==t,r=Utils.getElements(e);return r.length?r.map(e=>e.ddElement||(a?DDElement.init(e):null)).filter(e=>e):[]}}export{DDGridStack};